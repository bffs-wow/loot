(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"9i+i":function(t,e,s){"use strict";s.r(e),s.d(e,"StatisticsModule",(function(){return f}));var i=s("ofXK"),n=s("tyNb"),o=s("XNiG"),r=s("1G5W"),c=s("vkgz"),b=s("pHS2"),a=s("wBxZ"),d=s("fXoL"),l=s("suKW"),m=s("HcYF");function u(t,e){if(1&t&&(d.Nb(0,"div",9),d.Ib(1,"progress",10),d.Nb(2,"span",11),d.rc(3),d.Mb(),d.Mb()),2&t){const t=d.Wb();d.xb(1),d.bc("value",t.totalProgress.progress),d.xb(2),d.uc("Total Loot Progress (This Phase): ",t.totalProgress.rankingsReceived," / ",t.totalProgress.rankings,"")}}function g(t,e){if(1&t&&(d.Nb(0,"li"),d.rc(1),d.Mb()),2&t){const t=e.$implicit;d.xb(1),d.uc(" ",t.ranking.loot.name," (",t.sum,") ")}}function p(t,e){if(1&t&&(d.Nb(0,"div",12),d.Nb(1,"div"),d.Nb(2,"p",4),d.rc(3,"Most Popular Items"),d.Mb(),d.Nb(4,"ol"),d.pc(5,g,2,2,"li",13),d.Mb(),d.Mb(),d.Mb()),2&t){const t=d.Wb();d.xb(5),d.bc("ngForOf",t.mostPopularItems)}}function v(t,e){if(1&t&&(d.Nb(0,"li"),d.rc(1),d.Mb()),2&t){const t=e.$implicit;d.xb(1),d.uc(" ",t.item.name," (",t.count,") ")}}function h(t,e){if(1&t&&(d.Nb(0,"div",12),d.Nb(1,"div"),d.Nb(2,"p",4),d.rc(3,"Most Commonly Looted Items"),d.Mb(),d.Nb(4,"ol"),d.pc(5,v,2,2,"li",13),d.Mb(),d.Mb(),d.Mb()),2&t){const t=d.Wb();d.xb(5),d.bc("ngForOf",t.mostCommonItems)}}const M=[{path:"",component:(()=>{class t{constructor(t,e){this.lootListFacade=t,this.statisticsService=e,this.destroyed$=new o.a,this.raiderCount=0,this.lootReceived=0,this.totalRanked=0,this.avgAttendance=0,this.totalReceivedThisPhase=0,this.totalProgress=null,this.mostPopularItems=null,this.mostCommonItems=null}ngOnInit(){this.lootListFacade.raiders$.pipe(Object(r.a)(this.destroyed$),Object(c.a)(t=>{this.raiderCount=t.length,this.lootReceived=t.reduce((t,e)=>t+e.receivedLoot.length,0),this.totalRanked=t.reduce((t,e)=>t+e.rankings.length,0),this.avgAttendance=t.reduce((t,e)=>t+e.attendancePoints,0)/this.raiderCount;const e=t.map(t=>this.statisticsService.getRaiderListProgress(t));this.totalProgress=e.reduce((t,e)=>(t.rankings=t.rankings+e.rankings,t.rankingsReceived=t.rankingsReceived+e.rankingsReceived,t),{progress:0,rankings:0,rankingsReceived:0}),this.totalProgress.progress=this.totalProgress.rankingsReceived/this.totalProgress.rankings*100;const s=t.reduce((t,e)=>[...t,...e.rankings],[]),i=Object(b.a)(s,"loot.id"),n=Object.keys(i).filter(t=>"undefined"!=t).map(t=>({itemId:t,sum:i[t].reduce((t,e)=>t+e.ranking,0)})).sort((t,e)=>e.sum-t.sum),o=Object(a.a)(n,10);this.mostPopularItems=o.map(t=>({ranking:i[t.itemId][0],sum:t.sum}));const r=t.reduce((t,e)=>[...t,...e.receivedLoot],[]),c=Object(b.a)(r,"id"),d=Object.keys(c).filter(t=>"undefined"!=t).map(t=>({itemId:t,count:c[t].length})).sort((t,e)=>e.count-t.count),l=Object(a.a)(d,10);this.mostCommonItems=l.map(t=>({item:c[t.itemId][0],count:t.count}))})).subscribe()}ngOnDestroy(){this.destroyed$.next()}}return t.\u0275fac=function(e){return new(e||t)(d.Hb(l.a),d.Hb(m.a))},t.\u0275cmp=d.Bb({type:t,selectors:[["app-statistics"]],decls:34,vars:7,consts:[[1,"columns","is-multiline"],[1,"column","is-12"],[1,"level","is-mobile"],[1,"level-item","has-text-centered","box"],[1,"heading"],[1,"title"],[1,"box","has-background-dark"],["class","has-text-centered",4,"ngIf"],["class","level-item box",4,"ngIf"],[1,"has-text-centered"],["max","100",1,"progress","is-info","mb-0",3,"value"],[1,"has-text-centered","is-size-5","is-grey-light"],[1,"level-item","box"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(d.Nb(0,"div",0),d.Nb(1,"div",1),d.Nb(2,"nav",2),d.Nb(3,"div",3),d.Nb(4,"div"),d.Nb(5,"p",4),d.rc(6,"Raiders"),d.Mb(),d.Nb(7,"p",5),d.rc(8),d.Mb(),d.Mb(),d.Mb(),d.Nb(9,"div",3),d.Nb(10,"div"),d.Nb(11,"p",4),d.rc(12,"Total Loot Received (All Time)"),d.Mb(),d.Nb(13,"p",5),d.rc(14),d.Mb(),d.Mb(),d.Mb(),d.Nb(15,"div",3),d.Nb(16,"div"),d.Nb(17,"p",4),d.rc(18,"Total Rankings (This Phase)"),d.Mb(),d.Nb(19,"p",5),d.rc(20),d.Mb(),d.Mb(),d.Mb(),d.Nb(21,"div",3),d.Nb(22,"div"),d.Nb(23,"p",4),d.rc(24,"Average Attendance Points"),d.Mb(),d.Nb(25,"p",5),d.rc(26),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Nb(27,"div",1),d.Nb(28,"div",6),d.pc(29,u,4,3,"div",7),d.Mb(),d.Mb(),d.Nb(30,"div",1),d.Nb(31,"nav",2),d.pc(32,p,6,1,"div",8),d.pc(33,h,6,1,"div",8),d.Mb(),d.Mb(),d.Mb()),2&t&&(d.xb(8),d.sc(e.raiderCount),d.xb(6),d.sc(e.lootReceived),d.xb(6),d.sc(e.totalRanked),d.xb(6),d.sc(e.avgAttendance.toFixed(2)),d.xb(3),d.bc("ngIf",e.totalProgress),d.xb(3),d.bc("ngIf",e.mostPopularItems),d.xb(1),d.bc("ngIf",e.mostCommonItems))},directives:[i.l,i.k],styles:[""]}),t})()}];let N=(()=>{class t{}return t.\u0275mod=d.Fb({type:t}),t.\u0275inj=d.Eb({factory:function(e){return new(e||t)},imports:[[n.c.forChild(M)],n.c]}),t})(),f=(()=>{class t{}return t.\u0275mod=d.Fb({type:t}),t.\u0275inj=d.Eb({factory:function(e){return new(e||t)},imports:[[i.c,N]]}),t})()}}]);