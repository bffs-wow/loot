"use strict";(self.webpackChunksynergy_loot=self.webpackChunksynergy_loot||[]).push([[551],{6551:(X,m,o)=>{o.r(m),o.d(m,{StatisticsModule:()=>G});var l=o(177),u=o(1410),h=o(5286),k=o(7605),R=o(8841),p=o(2827),v=o(7945),t=o(4438),f=o(1725),F=o(6612);function P(e,c){if(1&e&&(t.j41(0,"div",9),t.nrm(1,"progress",10),t.j41(2,"span",11),t.EFF(3),t.k0s()()),2&e){const i=t.XpG();t.R7$(),t.Y8G("value",i.totalProgress.progress),t.R7$(2),t.Lme("Total Loot Progress (This Phase): ",i.totalProgress.rankingsReceived," / ",i.totalProgress.rankings,"")}}function T(e,c){if(1&e&&(t.j41(0,"div",9),t.nrm(1,"progress",12),t.j41(2,"span",11),t.EFF(3),t.k0s()()),2&e){const i=t.XpG();t.R7$(),t.Y8G("value",i.totalProgressTop10.progress),t.R7$(2),t.Lme("Top 10 Rankings Progress (This Phase): ",i.totalProgressTop10.rankingsReceived," / ",i.totalProgressTop10.rankings,"")}}function j(e,c){if(1&e&&(t.j41(0,"li"),t.EFF(1),t.k0s()),2&e){const i=c.$implicit;t.R7$(),t.Lme(" ",i.ranking.name," (",i.sum," points) ")}}function $(e,c){if(1&e&&(t.j41(0,"div",13)(1,"div")(2,"p",4),t.EFF(3,"Most Popular Items"),t.k0s(),t.j41(4,"ol"),t.DNE(5,j,2,2,"li",14),t.k0s()()()),2&e){const i=t.XpG();t.R7$(5),t.Y8G("ngForOf",i.mostPopularItems)}}function C(e,c){if(1&e&&(t.j41(0,"li"),t.EFF(1),t.k0s()),2&e){const i=c.$implicit;t.R7$(),t.Lme(" ",i.item.name," (",i.count,") ")}}function y(e,c){if(1&e&&(t.j41(0,"div",13)(1,"div")(2,"p",4),t.EFF(3,"Most Commonly Looted Items"),t.k0s(),t.j41(4,"ol"),t.DNE(5,C,2,2,"li",14),t.k0s()()()),2&e){const i=t.XpG();t.R7$(5),t.Y8G("ngForOf",i.mostCommonItems)}}const I=[{path:"",component:(()=>{class e{constructor(i,r){this.state=i,this.statisticsService=r,this.destroyed$=new h.B7,this.raiderCount=0,this.lootReceived=0,this.totalRanked=0,this.avgAttendance=0,this.totalReceivedThisPhase=0,this.totalProgress=null,this.totalProgressTop10=null,this.mostPopularItems=null,this.mostCommonItems=null}ngOnInit(){this.state.raiders$.pipe((0,k.Q)(this.destroyed$),(0,R.M)(i=>{this.raiderCount=i.length,this.lootReceived=i.reduce((s,n)=>s+n.received.length,0),this.totalRanked=i.reduce((s,n)=>s+n.wishlist.length,0),this.avgAttendance=i.reduce((s,n)=>s+n.attendance_points,0)/this.raiderCount;const r=i.map(s=>this.statisticsService.getRaiderListProgress(s));this.totalProgress=r.reduce((s,n)=>(s.rankings=s.rankings+n.rankings,s.rankingsReceived=s.rankingsReceived+n.rankingsReceived,s),{progress:0,rankings:0,rankingsReceived:0}),this.totalProgress.progress=this.totalProgress.rankingsReceived/this.totalProgress.rankings*100;const a=i.map(s=>this.statisticsService.getRaiderListProgress(s,10));this.totalProgressTop10=a.reduce((s,n)=>(s.rankings=s.rankings+n.rankings,s.rankingsReceived=s.rankingsReceived+n.rankingsReceived,s),{progress:0,rankings:0,rankingsReceived:0}),this.totalProgressTop10.progress=this.totalProgressTop10.rankingsReceived/this.totalProgressTop10.rankings*100;const S=i.reduce((s,n)=>[...s,...n.wishlist],[]),d=(0,p.A)(S,"item_id"),x=Object.keys(d).filter(s=>"undefined"!=s).map(s=>({itemId:s,sum:d[s].reduce((O,D)=>O+D.raider_points,0)})).sort((s,n)=>n.sum-s.sum),A=(0,v.A)(x,10);this.mostPopularItems=A.map(s=>({ranking:d[s.itemId][0],sum:s.sum}));const L=i.reduce((s,n)=>[...s,...n.received],[]),g=(0,p.A)(L,"item_id"),Y=Object.keys(g).filter(s=>"undefined"!=s).map(s=>({itemId:s,count:g[s].length})).sort((s,n)=>n.count-s.count),M=(0,v.A)(Y,10);this.mostCommonItems=M.map(s=>({item:g[s.itemId][0],count:s.count}))})).subscribe()}ngOnDestroy(){this.destroyed$.next()}static#t=this.\u0275fac=function(r){return new(r||e)(t.rXU(f.d),t.rXU(F.r))};static#s=this.\u0275cmp=t.VBU({type:e,selectors:[["app-statistics"]],decls:35,vars:8,consts:[[1,"columns","is-multiline"],[1,"column","is-12"],[1,"level","is-mobile"],[1,"level-item","has-text-centered","box"],[1,"heading"],[1,"title"],[1,"box","has-background-dark"],["class","has-text-centered",4,"ngIf"],["class","level-item box",4,"ngIf"],[1,"has-text-centered"],["max","100",1,"progress","is-info","mb-0",3,"value"],[1,"has-text-centered","is-size-5","is-grey-light"],["max","100",1,"progress","is-success","mb-0",3,"value"],[1,"level-item","box"],[4,"ngFor","ngForOf"]],template:function(r,a){1&r&&(t.j41(0,"div",0)(1,"div",1)(2,"nav",2)(3,"div",3)(4,"div")(5,"p",4),t.EFF(6,"Raiders"),t.k0s(),t.j41(7,"p",5),t.EFF(8),t.k0s()()(),t.j41(9,"div",3)(10,"div")(11,"p",4),t.EFF(12,"Total Loot Received (All Time)"),t.k0s(),t.j41(13,"p",5),t.EFF(14),t.k0s()()(),t.j41(15,"div",3)(16,"div")(17,"p",4),t.EFF(18,"Total Rankings (This Phase)"),t.k0s(),t.j41(19,"p",5),t.EFF(20),t.k0s()()(),t.j41(21,"div",3)(22,"div")(23,"p",4),t.EFF(24,"Average Attendance Points"),t.k0s(),t.j41(25,"p",5),t.EFF(26),t.k0s()()()()(),t.j41(27,"div",1)(28,"div",6),t.DNE(29,P,4,3,"div",7)(30,T,4,3,"div",7),t.k0s()(),t.j41(31,"div",1)(32,"nav",2),t.DNE(33,$,6,1,"div",8)(34,y,6,1,"div",8),t.k0s()()()),2&r&&(t.R7$(8),t.JRh(a.raiderCount),t.R7$(6),t.JRh(a.lootReceived),t.R7$(6),t.JRh(a.totalRanked),t.R7$(6),t.JRh(a.avgAttendance.toFixed(2)),t.R7$(3),t.Y8G("ngIf",a.totalProgress),t.R7$(),t.Y8G("ngIf",a.totalProgressTop10),t.R7$(3),t.Y8G("ngIf",a.mostPopularItems),t.R7$(),t.Y8G("ngIf",a.mostCommonItems))},dependencies:[l.Sq,l.bT]})}return e})()}];let E=(()=>{class e{static#t=this.\u0275fac=function(r){return new(r||e)};static#s=this.\u0275mod=t.$C({type:e});static#e=this.\u0275inj=t.G2t({imports:[u.iI.forChild(I),u.iI]})}return e})(),G=(()=>{class e{static#t=this.\u0275fac=function(r){return new(r||e)};static#s=this.\u0275mod=t.$C({type:e});static#e=this.\u0275inj=t.G2t({imports:[l.MD,E]})}return e})()}}]);